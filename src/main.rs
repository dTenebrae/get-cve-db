mod json_schema;
mod request_api;

use log::info;
use dotenv::dotenv;
use reqwest::Error as ReqError;
use env_logger;

#[tokio::main]
async fn main() -> Result<(), ReqError> {
    env_logger::init();
    info!("Starting to request an API...");
    dotenv().ok();
    let nist_api_token = option_env!("NIST_API_TOKEN");
    let url = format!("https://services.nvd.nist.gov/rest/json/cves/2.0/?resultsPerPage=1&startIndex=1");

    let json_resp: json_schema::CveRoot = request_api::get_response(url, nist_api_token).await?;
    println!("{:#?}", json_resp);

    Ok(())
}
